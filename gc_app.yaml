runtime: python37

# https://cloud.google.com/appengine/docs/standard#instance_classes
instance_class: F2

#entrypoint: daphne -p 8080 modularhistory.asgi:application
#entrypoint: gunicorn --max-requests 100 -b :$PORT main:app

error_handlers:
  - error_code: over_quota
    file: error.html
  - error_code: timeout
    file: error.html

automatic_scaling:
  max_instances: 10
  target_cpu_utilization: 0.7
  max_pending_latency: automatic
  max_concurrent_requests: 10

# https://cloud.google.com/appengine/docs/standard/python3/config/appref#handlers_element
handlers:
  # Serve files in the static directory
  - url: /static
    static_dir: static/
  # Serve robots.txt
  - url: /robots\.txt$
    static_files: templates/robots\.txt
    upload: templates/robots\.txt$
  # Route all other requests to the main app
  - url: /.*
    secure: always
    script: auto

includes:
  - gc_env.yaml