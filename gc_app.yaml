runtime: python37

# https://cloud.google.com/appengine/docs/standard#instance_classes
instance_class: F2

#entrypoint: daphne -p 8080 modularhistory.asgi:application
#entrypoint: gunicorn --max-requests 100 -b :$PORT main:app

error_handlers:
  - error_code: over_quota
    file: error.html
  - error_code: timeout
    file: error.html

automatic_scaling:
  max_instances: 10
  target_cpu_utilization: 0.7
  max_pending_latency: automatic
  max_concurrent_requests: 10

handlers:
  # Configure Google App Engine to serve the files in the app's static directory.
  - url: /static
    static_dir: static/
  # Route all other requests to the main app. This is required when static routes are defined
  # but can be omitted (along with the entire handlers section) if no static files are defined.
  - url: /.*
    secure: always
    script: auto

includes:
  - gc_env.yaml